# template for dev environment - contains everything except elasticsearch

version: '3'

services:
  redis:
    image: redis:alpine
    volumes:
      - ./.data-docker/redis:/data
  db:
    image: sameersbn/postgresql:9.6-2
    depends_on:
      - redis
    ports:
      - "5432:5432"
    volumes:
      - ./.data-docker/postgresql:/var/lib/postgresql
  app:
    depends_on:
      - db
    environment:
      - "DPP_REDIS_HOST=redis"
      - "MOJP_ELASTICSEARCH_DB=10.240.0.7:9200"
      - "MOJP_ELASTICSEARCH_INDEX=next-mojp-dev"
    volumes:
      - ./.data-docker:/mojp/data
      - ./.data-docker/.cache:/mojp/.cache
